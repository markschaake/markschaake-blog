---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';

type Props = CollectionEntry<'posts'>['data'];

const { title, description, pubDate, updatedDate, tags, handwritten, heroImage } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={title} description={description} image={heroImage?.src} />
	</head>
	<body>
		<Header />
		<main>
			<article>
				<header class="post-header">
					<h1>{title}</h1>
					<div class="meta">
						<FormattedDate date={pubDate} />
						{updatedDate && (
							<span class="updated">
								(Updated: <FormattedDate date={updatedDate} />)
							</span>
						)}
						{handwritten
							? <span class="badge handwritten">handwritten</span>
							: <span class="badge ai-assisted">AI-assisted</span>
						}
					</div>
					{tags && tags.length > 0 && (
						<div class="tags">
							{tags.map((tag) => (
								<span class="tag">{tag}</span>
							))}
						</div>
					)}
				</header>
				<div class="prose">
					<slot />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>

<style>
	.post-header {
		margin-bottom: 2rem;
		padding-bottom: 1.5rem;
		border-bottom: 1px solid var(--color-gray-200);
	}

	.post-header h1 {
		margin-bottom: 0.75rem;
	}

	.meta {
		color: var(--color-gray-500);
		font-size: 0.9375rem;
	}

	.updated {
		font-style: italic;
	}

	.tags {
		display: flex;
		gap: 0.5rem;
		margin-top: 0.75rem;
		flex-wrap: wrap;
	}

	.tag {
		background-color: var(--color-gray-100);
		color: var(--color-gray-600);
		padding: 0.25rem 0.625rem;
		border-radius: 9999px;
		font-size: 0.8125rem;
		font-weight: 500;
	}

	.badge {
		display: inline-block;
		padding: 0.125rem 0.5rem;
		border-radius: 9999px;
		font-size: 0.8125rem;
		font-weight: 500;
		margin-left: 0.75rem;
	}

	.handwritten {
		background-color: #dbeafe;
		color: #1e40af;
	}

	.ai-assisted {
		background-color: var(--color-gray-100);
		color: var(--color-gray-500);
	}

	@media (prefers-color-scheme: dark) {
		.handwritten {
			background-color: #1e3a5f;
			color: #93c5fd;
		}

		.ai-assisted {
			background-color: var(--color-gray-700);
			color: var(--color-gray-400);
		}
	}
</style>
